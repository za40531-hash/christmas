<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Merry Christmas</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",system-ui,-apple-system;}
body{
  height:100vh;overflow:hidden;
  display:flex;justify-content:center;align-items:center;
}

/* ===== èƒŒæ™¯ ===== */
body::before{
  content:"";position:fixed;left:0;top:0;
  width:50%;height:100vh;
  background:url("bg1.jpg") center/cover no-repeat;
  filter:blur(6px) brightness(.7);
  transform:scale(1.08);z-index:-5;
}
body::after{
  content:"";position:fixed;right:0;top:0;
  width:50%;height:100vh;
  background:url("bg2.jpg") center/cover no-repeat;
  filter:blur(6px) brightness(.7);
  transform:scale(1.08);z-index:-6;
}
.bg-blend{
  position:fixed;inset:0;z-index:-4;
  background:linear-gradient(to right,
    rgba(0,0,0,.55),
    rgba(0,0,0,.25),
    rgba(0,0,0,.25),
    rgba(0,0,0,.55));
}

/* ===== æƒå…‰ ===== */
.light-sweep{
  position:fixed;inset:0;pointer-events:none;z-index:-3;
  background:linear-gradient(120deg,
    transparent 0%,
    rgba(255,255,230,.35) 40%,
    transparent 80%);
  mix-blend-mode:screen;
  animation:sweep 9s linear infinite;
}
@keyframes sweep{
  0%{transform:translateX(-45%);opacity:0;}
  30%{opacity:.8;}
  60%{transform:translateX(45%);opacity:.5;}
  100%{transform:translateX(90%);opacity:0;}
}

/* ===== é£„é›ª ===== */
.snow{position:fixed;inset:0;pointer-events:none;z-index:1;}
.snow span{
  position:absolute;top:-10vh;font-size:16px;opacity:.35;
  animation:fall linear infinite;
}
@keyframes fall{to{transform:translateY(110vh);}}

/* ===== å°éŠæˆ² ===== */
#game-start{
  position:fixed;inset:0;z-index:999;
  background:url("X-MAS.jpg") center/cover no-repeat;
  box-shadow:inset 0 0 0 2000px rgba(0,0,0,.6);
  backdrop-filter:blur(8px);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  text-align:center;padding:20px;
}
.start-title{color:#fff;font-size:32px;font-weight:900;}
.start-sub{color:#eee;margin:10px 0;}
#mission{color:#ffdb99;font-size:18px;}
.mission-snow{
  position:absolute;font-size:44px;cursor:pointer;
  transition:.2s;z-index:1000;
}
.fade-out{animation:fadeOut .8s forwards;}
@keyframes fadeOut{to{opacity:0;visibility:hidden;}}

/* ===== å¡ç‰‡ ===== */
.card{
  width:92%;max-width:420px;
  background:rgba(255,255,255,.93);
  border-radius:20px;
  padding:26px;text-align:center;
  border:4px solid #0d8f47;
  box-shadow:0 0 0 4px #e3ba52 inset,0 18px 40px rgba(0,0,0,.22);
  position:relative;z-index:20;
  transition:.8s;
}
.card.hide{opacity:0;transform:scale(.95);pointer-events:none;}
#message{min-height:130px;white-space:pre-line;line-height:1.7;}
button{
  margin-top:18px;padding:12px 26px;
  border:none;border-radius:999px;
  background:linear-gradient(135deg,#ff8da6,#ffb3c7);
  color:#fff;font-size:16px;cursor:pointer;
}

#secret{
  position:absolute;top:-60px;left:50%;
  transform:translateX(-50%) scale(.6);
  font-size:28px;font-weight:800;
  color:#ff9f40;opacity:0;
}
.showSecret{
  animation:popIn 1.4s ease forwards,heartbeat 1.4s 1.4s infinite;
}
@keyframes popIn{
  0%{opacity:0;transform:translateX(-50%) scale(.4);}
  60%{opacity:1;transform:translateX(-50%) scale(1.12);}
  100%{opacity:1;transform:translateX(-50%) scale(1);}
}
@keyframes heartbeat{
  50%{transform:translateX(-50%) scale(1.08);}
}

/* ===== å›æ†¶ ===== */
#memories{
  position:fixed;inset:0;z-index:30;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(6px);
  display:flex;justify-content:center;align-items:center;
  opacity:0;pointer-events:none;transition:1s;
}
#memories.show{opacity:1;pointer-events:auto;}

/* å›æ†¶å…§å®¹å®¹å™¨ï¼šé è¨­å°å¼µ */
.memory{
  text-align:center;
  width:min(92vw, 360px);
}
.memory p{
  color:#fff;margin-top:14px;font-size:15px;line-height:1.7;
}

/* âœ… åœ–ç‰‡æ¡†ï¼šç”¨ä¾†æ§åˆ¶ã€Œæ¯”ä¾‹ã€ç½®ä¸­ã€å®Œæ•´é¡¯ç¤ºã€ */
.mem-frame{
  width:100%;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 16px 40px rgba(0,0,0,.45);
  display:flex;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,.12);
}
.mem-frame img{
  width:100%;
  height:100%;
  object-fit:cover; /* é è¨­ç…§ç‰‡ç…§ä½ åŸæœ¬é¢¨æ ¼ */
  display:block;
}

/* ğŸ”¥ photo11~13ï¼šæ”¹æˆå¤§å¼µ + å›ºå®šæ¯”ä¾‹ 1748:1240 + å®Œæ•´å‘ˆç¾ä¸è£åˆ‡ */
.memory.is-large{
  width:min(96vw, 1240px); /* æœ€å¤§åˆ° 1240ï¼Œæ‰‹æ©Ÿå°±è‡ªå‹•ç¸® */
}
.memory.is-large .mem-frame{
  aspect-ratio: 1748 / 1240; /* âœ…å›ºå®šæ¯”ä¾‹ */
}
.memory.is-large .mem-frame img{
  object-fit:contain; /* âœ…å®Œæ•´å‘ˆç¾ï¼Œä¸è£åˆ‡ */
  background:transparent;
}

/* ===== å›æ†¶æŒ‰éˆ• ===== */
.mem-btn{
  position:absolute;bottom:40px;
  padding:10px 18px;border:none;
  border-radius:999px;
  background:rgba(255,255,255,.85);
  font-size:14px;cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,.25);
}
#prevBtn{left:30px;}
#nextBtn{right:30px;}
@media(max-width:768px){
  .mem-btn{display:none;}
}
</style>
</head>

<body>

<div class="bg-blend"></div>
<div class="light-sweep"></div>

<div id="game-start">
  <div class="start-title">ğŸ® è–èª•äº’å‹•æ¨¡å¼</div>
  <div class="start-sub">æ‰¾åˆ°ä¸‰ç‰‡é›ªèŠ±æ‰èƒ½é–‹å§‹</div>
  <div id="mission">å·²æ‰¾åˆ°ï¼š0 / 3</div>
</div>

<div class="snow" id="snow"></div>

<div class="card" id="card">
  <div id="secret">å‘†å‘†ç“œç“œ & å¥‡å¥‡æ€ªæ€ª ğŸ’</div>
  <h2>Merry Christmas ğŸ„</h2>
  <h4 style="color:#777;">Toï¼šæˆ‘å®¶å‘†å‘†ç¸</h4>
  <div id="message">æƒ³çŸ¥é“å¦³å®¶ç“œç“œè¦åšä»€éº¼å—ï¼Ÿ</div>
  <button id="btn">ä¸‹ä¸€æ®µ ğŸ’</button>
</div>

<div id="memories">
  <button id="prevBtn" class="mem-btn">â† ä¸Šä¸€é </button>

  <div class="memory" id="memoryWrap">
    <div class="mem-frame" id="memFrame">
      <img id="memory-img" alt="">
    </div>
    <p id="memory-text"></p>
  </div>

  <button id="nextBtn" class="mem-btn">ä¸‹ä¸€é  â†’</button>
</div>

<audio id="bgm" src="music.mp3" preload="auto" loop></audio>

<script>
/* é£„é›ª */
const snow=document.getElementById("snow");
for(let i=0;i<80;i++){
  const s=document.createElement("span");
  s.textContent="â„";
  s.style.left=Math.random()*100+"vw";
  s.style.animationDuration=(6+Math.random()*6)+"s";
  s.style.animationDelay=(Math.random()*5)+"s";
  snow.appendChild(s);
}

/* å°éŠæˆ² */
let found=0;
const mission=document.getElementById("mission");
const game=document.getElementById("game-start");
for(let i=0;i<3;i++){
  const f=document.createElement("div");
  f.className="mission-snow";f.textContent="â„";
  f.style.left=(Math.random()*70+15)+"vw";
  f.style.top=(Math.random()*60+20)+"vh";
  f.onclick=()=>{
    f.remove();found++;
    mission.textContent=`å·²æ‰¾åˆ°ï¼š${found} / 3`;
    if(found===3){
      game.classList.add("fade-out");
      setTimeout(()=>game.style.display="none",800);
    }
  };
  document.body.appendChild(f);
}

/* éŸ³æ¨‚ï¼ˆé¿å…ç€è¦½å™¨æ“‹è‡ªå‹•æ’­æ”¾ï¼‰ */
const bgm=document.getElementById("bgm");
function fadeMusic(){
  let v=0;
  bgm.volume=0;
  bgm.play().catch(()=>{});
  const t=setInterval(()=>{
    v+=0.02; bgm.volume=Math.min(v,0.55);
    if(v>=0.55) clearInterval(t);
  },120);
}

/* å‘Šç™½é€å­—ï¼ˆä¿æŒä½ åŸå…§å®¹ï¼‰ */
const messages=[
  "\nå‘†å‘†ï¼Œé€™æ˜¯æå‰çµ¦å¦³çš„è–èª•ç¯€é©šå–œ,é›–ç„¶å¦³çš„ç¦®ç‰©é‚„æ²’åˆ°,ä½†è©²æœ‰çš„å„€å¼æ„Ÿèˆ‡é©šå–œæ„Ÿé‚„æ˜¯è¦æœ‰çš„,å¸Œæœ›å¦³æœƒå–œæ­¡,é‚£å°±å»¢è©±ä¸å¤šèªªå›‰æº–å‚™é–‹å§‹å›‰ğŸ¬â®ï¸â¸ï¸â­ï¸ğŸ¬ã€‚",
  "\nå‘†å‘†ï¼Œè¬è¬å¦³åœ¨ä»Šå¹´é—–é€²æˆ‘çš„ç”Ÿæ´»ï¼Œè®“æˆ‘çš„ç”Ÿæ´»è®Šå¾—æ›´å……å¯¦æœ‰è¶£,é›–ç„¶æœ‰çˆ­åµä½†ä¹Ÿæœ‰é–‹å¿ƒçš„äº‹æƒ…,ä½†æ„Ÿæƒ…å°±æ˜¯é€™æ¨£,æ²’æœ‰åŸæœ¬å°±é©åˆçš„â™‰â¤ï¸â™Œï¼ˆå¦³æ‡‚å¾—ï¼‰ã€‚",
  "\næˆ‘å–œæ­¡å¦³èªçœŸã€è€å°è„¾æ°£å˜´ç¡¬å‚²å¬Œæ™‚çš„æ¨£å­ã€‚æˆ‘ä¸æœƒè¨å­é€™æ¨£çš„å¦³,åè€Œè¦ºå¾—é€™æ¨£çš„å¦³å¾ˆå¯æ„›,æˆ‘çš„å°æœ‹å‹å¦³çœŸçš„å¾ˆå¥½ï¼Œç›¸ä¿¡è‡ªå·±å¥½å—â¤ï¸â¤ï¸â¤ï¸ï¼ˆæ‘¸é ­ï¼‰ã€‚",
  "\nä¸ç®¡å·¥ä½œå¤šç´¯ã€ç”Ÿæ´»å¤šç…©èºï¼Œå¦³çš„ç“œç“œç‰Œå……é›»å¯¶éƒ½æœƒåœ¨å¦³èº«é‚Š,æˆ‘æœƒåŠªåŠ›ç•¶é‚£å€‹è®“å¦³å®‰å¿ƒçš„ç“œç“œï¼Œæˆ‘æƒ³è®“å¦³çŸ¥é“ï¼Œå¦³æœ‰æˆ‘,å¦³ä¸æ˜¯ä¸€å€‹äººï¼Œä¸ç”¨ç¡¬æ’å¥½å—ğŸ’ğŸ’ğŸ’ã€‚",
  "\næœ€å¾Œæœ€å¾Œçµ•å°ä¸èƒ½å¿˜è¨˜è·Ÿå¦³èªªå¾—...è–èª•ç¯€å¿«æ¨‚å‘€ï¼Œå‘†å‘†ï¼Œæˆ‘å°å¦³çš„æ„Ÿæƒ…æ˜¯èªçœŸçš„ï¼Œæˆ‘æœƒç”¨è¡Œå‹•å»è­‰æ˜ï¼Œå¾€å¾Œä¹Ÿè«‹å¤šå¤šæŒ‡æ•™å›‰ å§Šå§ŠğŸ«¶ğŸ«¶ğŸ«¶ğŸ«¶ã€‚",
];

let idx=0;
const msg=document.getElementById("message");
const btn=document.getElementById("btn");
const card=document.getElementById("card");
const secret=document.getElementById("secret");
const memories=document.getElementById("memories");

function typeText(text){
  msg.textContent="";
  let i=0;
  const t=setInterval(()=>{
    msg.textContent+=text[i++];
    if(i>=text.length) clearInterval(t);
  },60);
}

btn.onclick=()=>{
  if(idx===0) fadeMusic();
  if(idx<messages.length){
    typeText(messages[idx++]);
    if(idx===messages.length) btn.textContent="æˆ‘å–œæ­¡ä½  â¤ï¸";
  }else{
    secret.classList.add("showSecret");
    card.classList.add("hide");
    setTimeout(()=>{
      memories.classList.add("show");
      showMemory(0);
    },800);
  }
};

/* å›æ†¶ */
const memoryData=[
  {img:"photo1.jpg",text:"ç¬¬ä¸€æ¬¡çš„å‘Šç™½é©šå–œå¤±æ•—QQ ğŸ‘‰ğŸ‘ˆ"},
  {img:"photo2.jpg",text:"åªè¦å¦³åœ¨æ—é‚Šï¼Œæˆ‘å°±å¾ˆå®‰å¿ƒ ğŸ’"},
  {img:"photo3.jpg",text:"é€™å€‹è¡¨æƒ…ï¼Œæˆ‘æœƒä¸€ç›´è¨˜å¾—"},
  {img:"photo4.jpg",text:"è¢«å¦³é è‘—çš„é‚£ä¸€åˆ»ï¼Œæˆ‘å¸Œæœ›æ™‚é–“æ…¢ä¸€é»"},
  {img:"photo5.jpg",text:"å¦³æ¯”äº†ä¸€åŠçš„å¿ƒï¼Œæˆ‘åœ¨å¿ƒè£¡è£œä¸Šå¦ä¸€åŠ(æ‰‹æœ‰éšœç¤™çš„æˆ‘ğŸ«¶)"},
  {img:"photo6.jpg",text:"çŒœçŒœçœ‹æˆ‘ç‰½å¦³çš„æ™‚å€™å†æƒ³ç”šéº¼"},
  {img:"photo7.jpg",text:"å¹³å‡¡çš„æ—¥å­ï¼Œå› ç‚ºå¦³è®Šå¾—ä¸å¹³å‡¡(ææ€ªçš„æˆ‘ğŸ¤£ğŸ¤£ğŸ¤£)"},
  {img:"photo8.jpg",text:"æˆ‘å¾ˆå–œæ­¡å¦³ç¬‘çš„æ™‚å€™ï¼Œå¾ˆå¯æ„›â£ï¸â£ï¸â£ï¸"},
  {img:"photo9.jpg",text:"æœ‰ä¸€ç¨®ã€Œé è‘—å°±å¾ˆå‰›å¥½ã€çš„æ„Ÿè¦º"},
  {img:"photo10.jpg",text:"å¦³çœ‹è‘—æ‰‹æ©Ÿï¼Œæˆ‘ç”¨æ‰‹æ©Ÿçœ‹è‘—å¦³"},
  {img:"photo11.jpg",text:""},
  {img:"photo12.jpg",text:""},
  {img:"photo13.jpg",text:""}
];

let memIndex=0;
const memImg=document.getElementById("memory-img");
const memText=document.getElementById("memory-text");
const memoryWrap=document.getElementById("memoryWrap");

const prevBtn=document.getElementById("prevBtn");
const nextBtn=document.getElementById("nextBtn");

/* âœ… æŒ‡å®šå“ªäº›è¦ç”¨ 1748:1240 å¤§åœ–æ¨¡å¼ */
const LARGE_PHOTOS = new Set(["photo11.jpg","photo12.jpg","photo13.jpg"]);

function showMemory(i){
  memIndex=i;

  const item = memoryData[i];
  memImg.src=item.img;
  memText.textContent=item.text;

  // å¤§åœ–æ¨¡å¼åˆ‡æ›
  if(LARGE_PHOTOS.has(item.img)){
    memoryWrap.classList.add("is-large");
  }else{
    memoryWrap.classList.remove("is-large");
  }

  // æŒ‰éˆ•å¯ç”¨ç‹€æ…‹ï¼ˆå¯é¸ï¼šè®“ä½¿ç”¨è€…çŸ¥é“åˆ°é ­äº†ï¼‰
  prevBtn.style.opacity = (memIndex===0) ? 0.5 : 1;
  nextBtn.style.opacity = (memIndex===memoryData.length-1) ? 0.5 : 1;
}

/* é›»è…¦æŒ‰éˆ• */
prevBtn.onclick=()=>{ if(memIndex>0) showMemory(memIndex-1); };
nextBtn.onclick=()=>{ if(memIndex<memoryData.length-1) showMemory(memIndex+1); };

/* éµç›¤ */
document.addEventListener("keydown",e=>{
  if(!memories.classList.contains("show")) return;
  if(e.key==="ArrowRight" && memIndex<memoryData.length-1) showMemory(memIndex+1);
  if(e.key==="ArrowLeft" && memIndex>0) showMemory(memIndex-1);
});

/* æ‰‹æ©Ÿæ»‘å‹• */
let startX=0;
memories.addEventListener("touchstart",e=>{ startX=e.touches[0].clientX; }, {passive:true});
memories.addEventListener("touchend",e=>{
  const dx=startX-e.changedTouches[0].clientX;
  if(dx>50 && memIndex<memoryData.length-1) showMemory(memIndex+1);
  if(dx<-50 && memIndex>0) showMemory(memIndex-1);
}, {passive:true});
</script>

</body>
</html>
